{
  "base": "debian:jessie-slim",
  "apt": { "packages": ["libjpeg", "libyaml"] },
  "npm": { "install": true },
  "run": { "in": "/srv/service", "as": "runuser", "uid": 666, "gid": 666 },
  "variants": {
    "development": {
      "apt": { "packages": ["libjpeg-dev", "libyaml-dev"] }
    },
    "test": {
      "includes": ["development"],
      "apt": { "packages": ["chromium"] },
      "copiestree": true,
      "entrypoint": ["npm", "test"]
    },
    "production": {
      "npm": { "env": "production" },
      "artifacts": [{ "from": "test", "source": "/srv/service", "destination": "." }],
      "entrypoint": ["npm", "start"]
    }
  }
}
